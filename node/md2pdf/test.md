# Overview
D230 is a POS terminal with dual CPU (AP+SP) architecture, which is different from the traditional single CPU architecture POS in some functional points. The following chapters will introduce these differences in detail.1
ccc
<ul>
asadasd
</ul>

![](https://127.0.0.1:8080/attach/652/20210709161448807.png)

> This is a blockquote with two paragraphs. Lorem ipsum dolor sit amet,
> consectetuer adipiscing elit. Aliquam这是第一行列表项。啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊 hendrerit mi posuere lectus.
> Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus.
> 
> Donec sit amet nisl. Aliquam semper ipsum sit amet velit. Suspendisse
> id sem consectetuer libero luctus adipiscing.

> This is a blockquote with two paragraphs. Lorem ipsum dolor sit amet,
consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus.
Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus.

> Donec sit amet nisl. Aliquam semper ipsum sit amet velit. Suspendisse
id sem consectetuer libero luctus adipiscing.

 This is the first level of quoting.
>
> > This is nested blockquote.
>
> Back to the first level.

> ## 这是一个标题。
> 
> 1.   这是第一行列表项。啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊这是第一行列表项。啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊这是第一行列表项。啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊
> 2.  这是第一行列表项。啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊这是第一行列表项。啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊这是第一行列表项。啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊这是第一行列表项。啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊这是第一行列表项。啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊这是第一行列表项。啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊这是第一行列表项。啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊
> 
> 给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：
> 
>     return shell_exec("echo $input | $markdown_script");
>     return shell_exec("echo $input | $markdown_script");
>     return shell_exec("echo $input | $markdown_script");

---------------------------------------

<li>1111</li>


    
-  用户表，储存用户信息

|字段|类型|空|默认|注释|
|:----    |:-------    |:--- |-- -|------      |
|uid    |int(10)     |否 |  |             |
|username |varchar(20) |否 |    |   用户名  |
|password |varchar(50) |否   |    |   密码    |
|name     |varchar(15) |是   |    |    昵称     |
|reg_time |int(11)     |否   | 0  |   注册时间  |

|字段|类型|空|默认|注释|
|:----    |:-------    |:--- |-- -|------      |
|uid    |int(10)     |否 |  |             |
|username |varchar(20) |否 |    |   用户名  |
|password |varchar(50) |否   |    |   密码    |
|name     |varchar(15) |是   |    |    昵称     |
|reg_time |int(11)     |否   | 0  |   注册时间  |
- 备注：无



## Purpose
This document describes the programming of D230 for developers and users to have a better understanding and use of D230 terminal.
## Audience
This document is suitable for system developers, application developers, technical support personnel, after-sales maintenance personnel, etc.
## Application Platform
- Prolin-albatross-2.9.x.xR or higher operating systems
- Boot-7.0.x.xR or higher boot



# System Software Architecture
The Prolin-albatross-2.9 platform uses the AP+SP dual CPU architecture. AP runs Prolin OS, SP runs PAXME OS. In order to improve the reliability of communication, the AP and SP communicate through a high-speed serial port with flow control. The SP terminal mainly includes functional modules such as password keyboard, IC card, magnetic stripe card, printer, SAM card and buzzer; AP terminal mainly includes wireless (4G/3G/2G), Wi-Fi, bluetooth, GPS and LCD, capacitive touch screen , camera, audio and contactless card and other functional modules. The software diagram of Prolin-albatross-2.9 platform is shown as below:
<center>

![](https://haniu.paxsz.com:8443/attach/453/20210128115238212.png)

</center>

# SDK and Toolchain
In order to support some of the new features of C++ and meet the needs of some users to develop applications using the new features of C++, the Prolin-albatross-2.9 platform upgrades the version of the toolchain used by Prolin from 4.6.3 to 8.3.0. Due to some compatibility issues between the toolchains of various versions, it is recommended that customers choose the 8.3.0 version of the cross-compilation chain provided by PAX to develop applications running on D230.

In order to facilitate the use of unified SDK tools to simultaneously develop Prolin-albatross-2.9 and other Prolin platform applications, Prolin SDK has been upgraded to allow users to select the appropriate toolchain and development library version according to the target operating platform of the application. Prolin SDK supports toolchain and development library selection since 2.9.1 version.

The path for the new version of Prolin SDK to select the toolchain and development library is:
- Switch toolchain: select the menu Project->Properties->C/C++ Build->Settings->Tool Settings->Basic Settings->Step 3-Choose ToolChain Version (if needed): ->ToolChain Type, select PAX ARM 4.6 .3 or PAX ARM 8.3.0
- Switch Prolin development library: Select the menu Windows->Preferences->PAX SDK->DEV Locatoin->Browser, select sdk/platforms/paxngfp_201205 (corresponding to the PAX ARM 4.6.3 toolchain) or sdk/platforms/prolin in the SDK directory -dev_glibc223 (corresponding to PAX ARM 8.3.0 toolchain).

When using the new version of the SDK, please refer to the following table for the correspondence among each Prolin platform, toolchain and development library:

| Prolin Version     | Toolchain Version    | Development Library Path        |
| ----------------------- | ------------- | --------------------------------- |
| Prolin -2.4、<br />Prolin-phoenix-2.5、<br />Prolin-cygnus-2.6、<br />Prolin-pelican-2.7、<br />Prolin-peng-2.8 | PAX ARM 4.6.3 | sdk/platforms/paxngfp_201205      |
| Prolin-albatross2.9                                          | PAX ARM 8.3.0 | sdk/platforms/prolin-dev_glibc223 |

<font color=red>Note：</font>

1. SDK uses PAX ARM 4.6.3 toolchain and sdk/platforms/paxngfp_201205 development library by default, so please manually switch PAX ARM 8.3.0 toolchain and sdk/platforms/prolin-dev_glibc223 development library when needed;
2. There is a corresponding relationship between the toolchain and the development library. When selecting the toolchain PAX ARM 4.6.3, be sure to switch the development library to sdk/platforms/paxngfp_201205. Similarly, when selecting the toolchain PAX ARM 8.3.0, switch the development library to sdk/platforms/prolin-dev_glibc223 at the same time.

### Independent Toolchain
PAX provides a cross-compilation toolchain of PAX ARM 8.3.0 version used in 64bit Linux environment to meet the needs of some customers to develop applications in Linux without using SDK. Customers who need it can download the toolchain in [PAX ARM 8.3 toolchain](https://ppn.paxengine.com/release/releaseDetail/468352495215706112?tab=section "PAX ARM 8.3 toolchain"), and build a Prolin application development environment under the 64bit Linux environment.

# Boot Instruction
In the off status, D230 can be turned on by plugging in the adapter/USB or long pressing the power button. Among them, after plugging in the adapter/USB, the system will enter into the charging mode; after long pressing the power button, the system will start the application normally.
## Charging Mode
If the mobile terminal continues to be charged for a long time and the battery voltage is greater than 4.0V, the positive and negative ions of the lithium battery will be active, which will affect battery life, and increase the probability of battery bulging or burning risk. For this reason, the battery safety management function is added to the Prolin system. When it is detected that the terminal is off and the adapter and battery are in place at the same time, the system will start to enter the charging mode.

When the system starts in charging mode, a static charging icon will be displayed during the Uboot stage to indicate that the device will enter the charging mode. After the system is started, the battery safety management module will dynamically adjust the charging status based on battery temperature, voltage and other information to ensure battery safety.

When starting in charging mode, the LCD display interface is as follows:
<center>

>
> ## 这是一个标题。
> 1.   这是第一行列表项。啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊这是第一行列表项。啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊这是第一行列表项。啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊
> 2.  这是第一行列表项。啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊这是第一行列表项。啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊这是第一行列表项。啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊这是第一行列表项。啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊这是第一行列表项。啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊这是第一行列表项。啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊这是第一行列表项。啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊
> 
> 给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：给出一些例子代码：
> 
>     return shell_exec("echo $input | $markdown_script");
>     return shell_exec("echo $input | $markdown_script");
>     return shell_exec("echo $input | $markdown_script");


![](https://haniu.paxsz.com:8443/attach/449/20210121200250168.png)

</center>

When Uboot displays the static charging icon, the OS is starting, and the terminal does not respond to any keys at this time.

After the charging mode is activated, the OS will display a dynamic charging icon according to the current charging situation. When the battery is fully charged, the LCD will display a full icon. In the charging process, if exception charging is detected, the OS will display the following exception prompt on the LCD:
<center>

![](https://haniu.paxsz.com:8443/attach/449/20210121200317666.png)

</center>

The error code in the second line of the exception prompt indicates the current exception situation, and the user can troubleshoot the cause of the exception based on the error code.

After starting in charging mode, if the battery is unplugged, the LCD will prompt "No Battery or Error!".

When it is detected that the terminal is off and the battery is not in place, the LCD will prompt "No Battery or Error!" after inserting the adapter/USB.

For specific instructions on charging mode, please refer to *Prolin Charging Mode Design Instructions*.

## Normal Mode
In normal mode, Uboot displays the following interface when the system is started. After the system is started, the application can conduct transactions.
<center>

![](https://haniu.paxsz.com:8443/attach/449/20210121200348360.png)

</center>

## Mode Switch
D230 has three modes: shutdown mode, normal working mode and charging mode. The switching logic of these three modes is as follows:
<center>

![](https://haniu.paxsz.com:8443/attach/453/20210128161125214.png)

</center>

## Hardware Reboot
If pressing the power button of D230 for 7 seconds, it will cause the hardware to restart. Therefore, you should avoid taking too long to press and hold the power button to turn on the D230. When the LCD displays "Starting Prolin OS", you can release the power button; when the static charging icon is displayed, do not press the power button, and wait until the system starts and displays dynamic charging icon, then press the power button to turn it on.

# Power Management
## Dynamic Adjustment of Power Consumption
The CPU on the D230 AP controls the power consumption dynamically, and the system automatically reduces the power consumption when it detects a low load. In order to maintain low power consumption in the standby state, application development should ensure that the CPU occupancy rate of the application does not exceed 2% to extend the standby time.
## Performance and Working Mode Settings
D230 AP side CPU supports three working modes: low power consumption mode, high performance mode and adaptive mode.

In the low power mode, the CPU frequency is fixed at 768MHz, and the terminal has strong endurance. This mode meets the requirements of most application scenarios. In the high performance mode, the main CPU frequency is fixed at 1.3GHz, which is suitable for some application scenarios that require a higher amount of computing, but the power consumption is about twice that of the low power mode. In the adaptive mode, the system dynamically adjusts the CPU frequency from low to high from 768MHz to 1.3GHz according to the current CPU occupancy, and automatically load balances.

After the system is running, the CPU works in low power mode by default. Applications with high computational load will cause high CPU occupancy. In adaptive mode, the CPU frequency will be frequently adjusted which will cause excessive power consumption. Therefore, it is generally not recommended to turn on the adaptive mode. For application scenarios with high computational requirements, it is recommended to switch to the high performance mode before the calculation, and then switch to the low power mode after the calculation is completed.

The method of switching CPU working mode is shown as below:

| Node Path         | Value Range and Meanings      |
| ----------------------- | ------------------------------------------------------------ |
| “/dev/cpu_mode” | read and write，it can be interactive, performance or powersave<br />interactive：adaptive mode<br />performance：high performance mode<br />powersave：low power mode |

| CPU Working Mode | Setting Method                             |
| -----------| ------------------------------------------------------------ |
| Low power mode | write “powersave” into "/sys/devices/system/cpu/cpufreq/policy0/scaling_governor”|
| High performance mode  | write “performance” into “/sys/devices/system/cpu/cpufreq/policy0/scaling_governor”|
| Adaptive mode  | write “ interactive” into “/sys/devices/system/cpu/cpufreq/policy0/scaling_governor” |
## Sleep/Wakeup
There are two types of physical buttons on D230, which are power button and camera button, but not plastic button. After the device sleeps, in order to prevent frequent wake-up caused by accidental touch of the Camera key, wake-up by pressing the power key is only supported in the sleep state.
# PED
On the basis of the dual CPU architecture of the Prolin-albatross-2.9 platform, the PED module is reconstructed, and the services related to sensitive data such as key management and PIN are placed on the SP side for processing, while the AP is responsible for the transfer of interface parameters and results and the processing of PED business logic. The reconstructed PED architecture is shown below:
<center>

![](https://haniu.paxsz.com:8443/attach/449/20210121200540209.png)

</center>

The PED of the Prolin-albatross-2.9 platform is compatible with most of the functions and features of the PED of the original Prolin platform. However, due to the limitation of SP resources, there are still some differences with the original PED. The following is a description of the characteristics of the new PED:
1. Only supports reading, writing, and operation of RSA keys whose modulus length is less than or equal to 2048 bits.
2. The SM4 key and MKSK key share the storage area.
3. The data length of MAC and DES operations must be less than or equal to 2048 bytes.
4. Since the key is stored on the SP side, erasing the data partition will not cause the terminal to tamper.
5. Due to the limitation of SP CPU's computing power, the efficiency of key generation, storage, erasing and data encryption and decryption operations is low and time-consuming.

# System Firmware Upgrade Package
Due to the dual CPU architecture, the system software composition is different from that of a single CPU.
## Boot File Differences
- Single CPU architecture: u-boot_x.x.x.x_mach_Release_builddate_SIG.bin
- Dual CPU architecture: boot-x.x.x.x_mach_Release_builddate_SIG.zip which includes AP's Uboot file (u-boot_x.x.x.x_mach_Release_builddate_SIG.bin) and SP's boot file (spboot_x.x.x.x_mach_Release_builddate_SIG.bin).

## OS File Differences
- Single CPU architecture: Prolin OS firmware package consists of kernel.img, ramdisk.img and base.img.
- Dual CPU architecture: Prolin OS needs to include the OS file on the AP side and the OS file on the SP side. Therefore, the Prolin-albatross-2.9 platform OS firmware package consists of kernel.img, ramdisk.img, base.img and spos-albatross.bin.

## Note
If the user uses the TermAssist tool provided by PAX to upgrade the terminal software, version 3.1.7.606 or higher are required. When updating the system software, TermAssist will decompress the compressed package selected by the user and download the files in the compressed package to the terminal one by one.

If the user wants to upgrade the terminal software  remotely, the complete Boot file (zip package) and OS file (zip package) need to be obtained from the remote server first. After the files are obtained, the application needs to call the OsBootUpgrade() function to install the Boot file (zip package), and call the OsFirmwareUpgrade() function to install the OS file (zip package). The SP side must enter the Boot stage to install the OS and Boot files, and functional modules such as the password keyboard, IC card, magnetic stripe card, printer, SAM card, and buzzer are implemented in SP OS. Therefore, after the installation, the terminal needs to be reboot to bring the function modules in the SP OS into effect, which can be implemented by calling the OsReboot() function or manually restarting the terminal.

# Button and Touch Screen Operation
Due to the potential differences in the device file names (input/event numbers) created by the Prolin subsystem (Prolin system uses a standard input subsystem) for input devices, a device soft link with a fixed name will be created for the keyboard and touch screen device during system initialization.
- The device name of the keyboard is: "/dev/keypad"
- The device name of the touch screen is: "/dev/tp"

Sample code:
~~~ c
void test_input_device(void)
{
    FILE* keyboard = fopen("/dev/keypad", "r");
    FILE* touchpanel = fopen("/dev/tp", "r");
    if (keyboard) {
		printf("Open keyboard successfuly.\n");
		fclose(keyboard);
    } else {
		printf("Could not open keyboard!\n");
    }
    if (touchpanel) {
		printf("Open touch panel successfuly.\n");
		fclose(touchpanel);
    } else {
		printf("Could not open touch panel!\n");
    }
}
~~~
D230 provides 3.5-inch full touch screen and 2.8-inch color screen with plastic buttons. The application can call OsRegGetValue(“ro.fac.keybroad”,value) to figure out whether the currently used configuration has plastic keys, so as to create a virtual keyboard in the full touch screen configuration to meet the input needs in the scene where input is needed.

For terminals with plastic buttons, in order to meet safety requirements, the plastic buttons are connected to the SP side, therefore the AP side does not provide device nodes that directly control the button tone and button backlight (such as buzzer_keypad_enable, backlight_on, etc.). If the application needs to control the button tone and button backlight switch, please call OsSetKeyTone and OsKbBacklight provided in *Prolin API Programming Guide* to realize the control.

# Bluetooth Communication
D230 supports bluetooth communication, but there are some differences between the bluetooth function in Prolin-albatross-2.9 platform and other Prolin platforms. For details, please refer to Prolin-albatross-2.9 Bluetooth function in *Prolin Bluetooth Programming Guide*.

# LCD
When a single static screen is displayed for a long time, the following problems may occur:
1. There will be afterimages when switching other screens;
2. Destroy the liquid crystal characteristics of the LCD, resulting in polarization of the liquid crystal and bright streaks.

It is recommended to avoid displaying a single static screen for a long time. For commercial equipment, it is recommended to upgrade the system firmware.

# Printer
The D230 printer is connected on the SP side. Since there are strict requirements on heating time, stepping speed, etc. in the printing process, and SP OS is a single-task operating system, please do not operate other SP modules (such as magnetic cards, IC cards, PED, etc.) other than printers during the printing process. Otherwise the printing effect may be affected.

# SAM Card Mutually Exclusive
Due to the limitation of hardware resources, D230 SAM1 and SAM2 have multiplexing on hardware resources. Therefore, attention should be paid to the serial use of SAM1 and SAM2. When one SAM card channel is already open and if the application tries to open another SAM card channel again, ERR_DEV_BUSY wil be returned.
